var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _react=_interopRequireDefault(require("react"));var _reactNative=require("react-native");var _=require("../../");function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2["default"])(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2["default"])(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var ImagePickerExample=function(_React$Component){(0,_inherits2["default"])(ImagePickerExample,_React$Component);var _super=_createSuper(ImagePickerExample);function ImagePickerExample(props){var _this;(0,_classCallCheck2["default"])(this,ImagePickerExample);_this=_super.call(this,props);_this.handleFileChange=function(files){_this.setState({files:files});};_this.handleFile2Change=function(files2){_this.setState({files2:files2});};_this.state={files:[{url:'https://zos.alipayobjects.com/rmsportal/WCxfiPKoDDHwLBM.png',id:'2121'},{url:'https://zos.alipayobjects.com/rmsportal/WCxfiPKoDDHwLBM.png',id:'2122'},{url:'https://zos.alipayobjects.com/rmsportal/WCxfiPKoDDHwLBM.png',id:'2123'},{url:'https://zos.alipayobjects.com/rmsportal/WCxfiPKoDDHwLBM.png',id:'2124'},{url:'https://zos.alipayobjects.com/rmsportal/WCxfiPKoDDHwLBM.png',id:'2125'},{url:'https://zos.alipayobjects.com/rmsportal/WCxfiPKoDDHwLBM.png',id:'2126'}],files2:[]};return _this;}(0,_createClass2["default"])(ImagePickerExample,[{key:"requestCameraPermission",value:function requestCameraPermission(){return __awaiter(this,void 0,void 0,_regenerator["default"].mark(function _callee(){var granted;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _reactNative.PermissionsAndroid.request(_reactNative.PermissionsAndroid.PERMISSIONS.READ_EXTERNAL_STORAGE,{title:'需要访问相册',message:'需要访问相册'});case 3:granted=_context.sent;if(granted===_reactNative.PermissionsAndroid.RESULTS.GRANTED){this.setState({granted:true});}else{this.setState({granted:false});}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);console.warn(_context.t0);case 10:case"end":return _context.stop();}}},_callee,this,[[0,7]]);}));}},{key:"componentDidMount",value:function componentDidMount(){return __awaiter(this,void 0,void 0,_regenerator["default"].mark(function _callee2(){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(_reactNative.Platform.OS==='android')){_context2.next=3;break;}_context2.next=3;return this.requestCameraPermission();case 3:case"end":return _context2.stop();}}},_callee2,this);}));}},{key:"render",value:function render(){if(_reactNative.Platform.OS==='android'&&!this.state.granted){return _react["default"].createElement(_reactNative.Text,null,"\u9700\u8981\u8BBF\u95EE\u76F8\u518C\u7684\u6743\u9650");}return _react["default"].createElement(_reactNative.View,{style:{marginTop:20,marginLeft:20}},_react["default"].createElement(_.ImagePicker,{onChange:this.handleFileChange,files:this.state.files}),_react["default"].createElement(_.WhiteSpace,null),_react["default"].createElement(_.ImagePicker,{onChange:this.handleFile2Change,files:this.state.files2}));}}]);return ImagePickerExample;}(_react["default"].Component);exports["default"]=ImagePickerExample;